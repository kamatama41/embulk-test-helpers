machine:
  java:
    version: oraclejdk8

dependencies:
  pre:
    - git config --global user.email "shiketaudonko41@gmail.com"
    - git config --global user.name "kamatama41"

deployment:
  snapshot:
    branch: /^(?!(master|release|gh-pages|snapshot)$).+$/
    commands:
      - ./gradlew removeRepository publish
      - git checkout -b snapshot
      - git push --force-with-lease origin snapshot
  release:
    branch: release
    commands:
      - git checkout -b gh-pages
      - ./gradlew release -Prelease.useAutomaticVersion=true
  reflect-to-master:
    branch: gh-pages
    commands:
      - git checkout -b master
      - git push origin master
