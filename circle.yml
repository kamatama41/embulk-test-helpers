machine:
  java:
    version: oraclejdk8

deployment:
  snapshot:
    branch: /^(?!(master|release|gh-pages|snapshot)$).+$/
    commands:
      - ./gradlew removeRepository publish
      - git checkout -b snapshot
      - git push --force-with-lease origin snapshot
  release:
    branch: release
    commands:
      - git checkout -b gh-pages
      - ./gradlew release -Prelease.useAutomaticVersion=true
  release:
    branch: gh-pages
    commands:
      - git checkout -b master
      - git push origin master
